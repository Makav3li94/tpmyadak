import{jsxs as t,Fragment as j,jsx as r}from"react/jsx-runtime";import{F as D}from"./front-layout-Bq-36bXZ.js";import{Link as F,router as h}from"@inertiajs/react";import{useState as u,useCallback as E,useEffect as I}from"react";import{P as W}from"./product-card-0UCUN5ag.js";import{useCart as M}from"react-use-cart";import{s as g}from"./textarea-input-CXyI_aPO.js";import{B as R}from"./breadcrumb-BjIIdQz3.js";import T from"./list-sidebar-Bd3tMJux.js";import{u as q,P as z,N as G}from"./carousalArrowButtons-DXZfx4kV.js";import H from"embla-carousel-react";import J from"embla-carousel-autoplay";import{C as K}from"./card-BmfKSUuz.js";import"sonner";import{P as O}from"./pagination-C7FOJRJp.js";import"./hooks-CFRBbKAZ.js";import"theme-change";import"./header-single-C3tOy7O_.js";import"lucide-react";import"./logo-C8A0auOY.js";import"motion/react";import"./button-s_fcD1op.js";import"dayjs";import"./megu-menu-N_rMxthN.js";import"./feature-QeK4Uxmd.js";import"./badge-DHrEAO1i.js";import"./MultiRangeSlider-BON0lKoX.js";import"./searchFilter-B8iKzvDk.js";import"@headlessui/react";import"qs";const Q=l=>{const[o,i]=u(0),[n,d]=u(0),a=E(c=>{d(c.scrollSnapList().length),i(c.selectedScrollSnap())},[]);return I(()=>{l&&(a(l),l.on("select",a),l.on("reInit",a))},[l,a]),{selectedSnap:o,snapCount:n}},U=l=>{const{selectedSnap:o,snapCount:i}=l;return t("div",{className:"embla__selected-snap-display",children:[o+1," / ",i]})};function V(l){const{data:{links:o,data:i},brands:n=null,carBrands:d=null,carModels:a=null,categories:c=null,filters:f=null,productCategory:s}=l,{addItem:b}=M(),[v,x]=u(""),[N,p]=H({align:"start",direction:"rtl",loop:!0},[J()]),{prevBtnDisabled:S,nextBtnDisabled:C,onPrevButtonClick:y,onNextButtonClick:_}=q(p),{selectedSnap:B,snapCount:P}=Q(p),k=e=>{x(e.target.value),h.get(route(route().current(),s.slug),{column:e.target.value},{replace:!0,preserveState:!0,preserveScroll:!0})},w=e=>{b({id:e.id,sku:e.sku,title:e.title,excerpt:e.excerpt,discount:e.discount,image:e.image,price:e.price}),g("محصول به سبد خرید اضافه شد","success")},L=e=>{h.post(route("user.wishlists.store"),{item:e},{forceFormData:!0,onSuccess:()=>g("محصول به لیست خرید اضافه شد","success")})};return t(j,{children:[r(R,{l1:["دسته بندی",""],l2:[s.title,""]}),r("section",{className:"w-full container justify-center mb-12",children:t("div",{className:"grid grid-cols-1 md:grid-cols-12 md:gap-x-2 lg:gap-x-8 xl:gap-x-10",children:[r(T,{brands:n,carBrands:d,carModels:a,categories:c,filters:f,routeParam:s.slug}),t("div",{className:"md:col-span-8 lg:col-span-9 mt-6 md:mt-0",children:[t("h2",{className:"font-bold text-2xl pb-6",children:["زیردسته های موجود در : ",s.title]}),s.children&&s.children.length>0&&t("section",{className:"bembla relative",children:[r("div",{className:"bembla__viewport",ref:N,children:r("div",{className:"bembla__container",children:s.children.map((e,m)=>r("div",{className:"bembla__slide",children:t(K,{children:[r("figure",{children:e.image!==null?r("img",{src:route("file.show",{file:e.image,dir:"category/"}),className:"h-22",alt:"slide"}):r("img",{src:"/thumbnail.webp",className:"h-22",alt:"slide"})}),t("div",{className:"card-body text-center p-2",children:[r(F,{href:route("home.getCategory",e.slug),children:r("h2",{className:"card-title justify-center text-sm",children:e.title})}),e.description!==null&&r("p",{children:e.description})]})]})},m))})}),t("div",{className:"bembla__controls",children:[t("div",{className:"bembla__buttons",children:[r(z,{onClick:y,disabled:S}),r(G,{onClick:_,disabled:C})]}),r(U,{selectedSnap:B,snapCount:P})]})]}),t("div",{className:"my-8 text-left",children:[r("label",{htmlFor:"cars",children:"مرتب سازی"}),t("select",{name:"cars",id:"cars",className:"border-[1px] border-gray-300 px-1 mx-2",value:v,onChange:e=>k(e),children:[r("option",{value:["created_at","desc"],children:"جدیدترین"}),r("option",{value:["price","asc"],children:"ارزانترین"}),r("option",{value:["price","desc"],children:"گرانترین"})]})]}),r("div",{className:"-mx-px grid grid-cols-1 border-l border-gray-200 sm:mx-0  sm:grid-cols-2 lg:grid-cols-4 ",children:i.map((e,m)=>r(W,{product:e,handleAdd:()=>w(e),handleWish:()=>L(e)},m))}),r("div",{className:"border-[1px] border-gray-200 mt-8"}),r("div",{className:"w-full overflow-x-auto flex lg:justify-center",children:r(O,{links:o})})]})]})})]})}V.layout=l=>r(D,{isSingle:!0,children:l});export{V as default};
