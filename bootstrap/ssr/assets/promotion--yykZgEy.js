import{jsxs as t,jsx as e,Fragment as k}from"react/jsx-runtime";import{Star as g}from"lucide-react";import{Link as w}from"@inertiajs/react";import{useCart as S}from"react-use-cart";import{i as _}from"./textarea-input-CXyI_aPO.js";import{B as I}from"./button-s_fcD1op.js";import{useState as y,useEffect as b,useCallback as N}from"react";import"sonner";import{b as j}from"./hooks-CFRBbKAZ.js";import C from"embla-carousel-react";import"dayjs";const D=({targetDate:a})=>{console.log(a);const[l,c]=y(new Date(a).getTime()),[n,m]=y({days:0,hours:0,minutes:0,seconds:0});b(()=>{setInterval(()=>u(),1e3)},[]);const u=()=>{if(l){const i=new Date().getTime(),r=l-i;let o=Math.floor(r/(1e3*60*60*24)),h=Math.floor(r%(1e3*60*60*24)/(1e3*60*60)),x=Math.floor(r%(1e3*60*60)/(1e3*60)),p=Math.floor(r%(1e3*60)/1e3);const s=[1,2,3,4,5,6,7,8,9];o=`${o}`,s.includes(h)?h=`0${h}`:s.includes(x)?x=`0${x}`:s.includes(p)&&(p=`0${p}`),m({days:o,hours:h,minutes:x,seconds:p})}};return t("div",{className:"flex gap-x-1 sm:gap-x-4",children:[t("div",{className:"w-10 sm:w-14 border-2 border-gray-300 rounded-sm flex flex-col items-center px-4 py-2",children:[e("span",{className:"font-bold",children:n.days||"0"}),e("span",{className:"text-xs sm:text-sm text-gray-400 font-ligh",children:"روز"})]}),t("div",{className:"w-10 sm:w-14 border-2 border-gray-300 rounded-sm flex flex-col items-center px-4 py-2",children:[e("span",{className:"font-bold",children:n.hours||"00"}),e("span",{className:"text-xs sm:text-sm text-gray-400 font-light",children:"ساعت"})]}),t("div",{className:"w-10 sm:w-14 border-2 border-gray-300 rounded-md flex flex-col items-center px-4 py-2",children:[e("span",{className:"font-bold",children:n.minutes||"00"}),e("span",{className:"text-xs sm:text-sm text-gray-400 font-light",children:"دقیقه"})]}),t("div",{className:"w-10 sm:w-14 border-2 border-gray-300 rounded-md flex flex-col items-center px-4 py-2",children:[e("span",{className:"font-bold",children:n.seconds||"00"}),e("span",{className:"text-xs sm:text-sm text-gray-400 font-light",children:"ثانیه"})]})]})},T=a=>{const[l,c]=y(0),[n,m]=y([]),u=N(o=>{a&&a.scrollTo(o)},[a]),i=N(o=>{m(o.scrollSnapList())},[]),r=N(o=>{c(o.selectedScrollSnap())},[]);return b(()=>{a&&(i(a),r(a),a.on("reInit",i).on("reInit",r).on("select",r))},[a,i,r]),{selectedIndex:l,scrollSnaps:n,onDotButtonClick:u}},P=a=>{const{children:l,...c}=a;return e("button",{type:"button",...c,children:l})};function H({promoProducts:a}){const l=a[0],c=a.slice(1),n=j(),m=[];for(let s=0;s<c.length;s+=3)m.push(c.slice(s,s+3));const[u,i]=C({axis:"y"}),{selectedIndex:r,scrollSnaps:o,onDotButtonClick:h}=T(i),{addItem:x}=S(),p=s=>{x({id:s.id,sku:s.sku,title:s.title,excerpt:s.excerpt,discount:s.discount,image:s.image,price:s.price})};return e("section",{className:"w-full flex justify-center  bg-base-200 py-12",children:e("div",{className:"container",children:t("div",{className:"grid grid-cols-12  lg:gap-x-10",children:[t("div",{className:"col-span-12 flex lg:col-span-9 justify-between bg-white drop-shadow-lg shadow-gray-400 px-2 py-4 mt-16 items-center",children:[e("h3",{className:"modtitle2",children:e("span",{children:"حراج روز"})}),l&&!_(l)&&t(k,{children:[e("div",{className:"w-[150px] h-[150px] sm:w-[300px] sm:h-[300px] md:w-[250px] md:h-[250px] lg:w-[350px] lg:h-[350px] xl:w-[400px] xl:h-[400px] flex-shrink-0 mx-auto ",children:e(w,{href:route("home.getProduct",l.sku),title:"dealofday",className:"relative block w-full h-full group overflow-hidden",children:e("img",{src:`https://cdn.tpmyadak.com/prothumb/${l.image}`,alt:"deal",className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-300 group-hover:opacity-75 my-auto "})})}),t("div",{className:"py-6 lg:py-12 md:px-8 lg:px-0 lg:pl-2",children:[e(w,{href:route("home.getProduct",l.sku),title:"producttitle",children:e("h4",{className:"text-[#333333] hover:text-[#d8330a] text-xs lg:text-base font-bold transition duration-300 ease-in",children:l.title})}),t("div",{className:"flex my-6",children:[e(g,{className:"w-6 h-6 lg:w-4 lg:h-4 text-yellow-500"}),e(g,{className:"w-6 h-6 lg:w-4 lg:h-4 text-yellow-500"}),e(g,{className:"w-6 h-6 lg:w-4 lg:h-4 text-yellow-500"}),e(g,{className:"w-6 h-6 lg:w-4 lg:h-4 text-yellow-500"}),e(g,{className:"w-6 h-6 lg:w-4 lg:h-4 text-gray-500"})]}),t("div",{className:"my-6 font-bold flex-grow text-gray-400",children:[t("span",{className:"text-[#d8330a] text-sm sm:text-base pl-2",children:[parseInt(l.price-l.discount).toLocaleString("en")," میلیون"]}),t("span",{className:"line-through text-sm sm:text-base",children:[parseInt(l.price).toLocaleString("en")," میلیون"]}),e("p",{className:"font-medium text-xs sm:text-sm mt-6",children:l.excerpt})]}),e(D,{targetDate:l.date_end}),e("div",{className:"flex mt-8 gap-x-1 ms:gap-x-2",children:t(I,{onClick:()=>p(l),type:"danger",className:"relative flex  items-center justify-center rounded-md border border-transparent bg-gray-100 px-8 py-2 text-xs font-medium text-gray-900 hover:bg-gray-200",children:["افزودن به سبد خرید ",t("span",{className:"sr-only",children:[", ",l.title]})]})})]})]})]}),!n&&t("div",{className:"col-span-12 lg:col-span-3 lg:col-start-10 drop-shadow-lg shadow-gray-400 mt-16",children:[e("div",{className:"bg-[#d8330a] rounded-t-md py-3",children:e("span",{className:"text-white font-blod text-center px-3",children:"حراج روز"})}),e("div",{id:"indicators-carousel",className:"relative w-full bg-white","data-carousel":"static",children:e("div",{className:"relative md:h-[1200px] lg:h-[500px] overflow-hidden rounded-lg",children:t("section",{className:"dembla h-full",children:[e("div",{className:"dembla__viewport",ref:u,children:e("div",{className:"dembla__container h-full",children:m.map((s,f)=>e("div",{className:"dembla__slide h-full flex flex-col",children:s.map((d,v)=>t("div",{className:"flex flex-col md:flex-row justify-between items-center relative after:absolute after:content-[''] after:bg-gray-200 after:w-[90%] after:h-[1px] after:top-full after:left-1/2 after:-translate-x-1/2 pt-3 ",children:[e("div",{className:"w-[250px] h-[250px] md:w-[300px] md:h-[300px] lg:w-[75px] lg:h-[75  px] xl:w-[90px] xl:h-[90px] lg:flex-shrink-0 mx-auto my-2",children:e(w,{href:route("home.getProduct",d.sku),title:"dealofday",className:"relative block w-full h-full group overflow-hidden md:mr-5 lg:mr-0",children:e("img",{src:`https://cdn.tpmyadak.com/prothumb/${d.image}`,alt:"deal",className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-300 group-hover:opacity-75"})})})," ",t("div",{className:"lg:py-2 lg:px-0 lg:pl-2 w-full text-center lg:text-start my-auto",children:[e(w,{href:route("home.getProduct",d.sku),title:"producttitle",children:e("h4",{className:"text-[#333333] hover:text-[#d8330a] text-lg font-bold lg:font-medium lg:text-sm transition duration-300 ease-in py-2",children:d.title.substring(0,40)+" ..."})}),t("div",{className:"text-gray-400 py-1",children:[t("div",{className:"line-through text-sm sm:text-base",children:[parseInt(d.price).toLocaleString("en")," میلیون"]}),t("div",{className:"text-[#d8330a] text-sm sm:text-base pl-2",children:[parseInt(d.price-d.discount).toLocaleString("en")," میلیون"]})]})]})]},v))},f))})}),e("div",{className:"dembla__controls flex justify-center",children:e("div",{className:"dembla__dots",children:o.map((s,f)=>e(P,{onClick:()=>h(f),className:"dembla__dot".concat(f===r?" dembla__dot--selected":"")},f))})})]})})})]})]})})})}export{H as default};
