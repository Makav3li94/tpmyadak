import{jsxs as t,Fragment as D,jsx as r}from"react/jsx-runtime";import{F}from"./front-layout-DwpaNeY4.js";import{Link as j,router as h}from"@inertiajs/react";import{useState as u,useCallback as E,useEffect as I}from"react";import{P as W}from"./product-card-8I9gOsEp.js";import{useCart as M}from"react-use-cart";import{s as g}from"./textarea-input-CXyI_aPO.js";import{B as R}from"./breadcrumb-BjIIdQz3.js";import T from"./list-sidebar-0iMReiUx.js";import{u as q,P as z,N as G}from"./carousalArrowButtons-DXZfx4kV.js";import H from"embla-carousel-react";import J from"embla-carousel-autoplay";import{C as K}from"./card-BmfKSUuz.js";import"sonner";import"./hooks-DXR5ACFX.js";import"theme-change";import"./header-single-nqXylpNz.js";import"lucide-react";import"./logo-C8A0auOY.js";import"motion/react";import"./button-s_fcD1op.js";import"dayjs";import"./megu-menu-CmXrFOIc.js";import"./feature-QeK4Uxmd.js";import"./badge-DHrEAO1i.js";import"./MultiRangeSlider-BON0lKoX.js";import"./searchFilter-B8iKzvDk.js";const O=s=>{const[c,o]=u(0),[n,d]=u(0),a=E(i=>{d(i.scrollSnapList().length),o(i.selectedScrollSnap())},[]);return I(()=>{s&&(a(s),s.on("select",a),s.on("reInit",a))},[s,a]),{selectedSnap:c,snapCount:n}},Q=s=>{const{selectedSnap:c,snapCount:o}=s;return t("div",{className:"embla__selected-snap-display",children:[c+1," / ",o]})};function U(s){const{data:{links:c,data:o},brands:n=null,carBrands:d=null,carModels:a=null,categories:i=null,filters:b=null,productCategory:l}=s,{addItem:f}=M(),[v,x]=u(""),[N,p]=H({align:"start",direction:"rtl",loop:!0},[J()]),{prevBtnDisabled:S,nextBtnDisabled:C,onPrevButtonClick:y,onNextButtonClick:_}=q(p),{selectedSnap:B,snapCount:k}=O(p),P=e=>{x(e.target.value),h.get(route(route().current(),l.slug),{column:e.target.value},{replace:!0,preserveState:!0,preserveScroll:!0})},w=e=>{f({id:e.id,sku:e.sku,title:e.title,excerpt:e.excerpt,discount:e.discount,image:e.image,price:e.price}),g("محصول به سبد خرید اضافه شد","success")},L=e=>{h.post(route("user.wishlists.store"),{item:e},{forceFormData:!0,onSuccess:()=>g("محصول به لیست خرید اضافه شد","success")})};return t(D,{children:[r(R,{l1:["دسته بندی",""],l2:[l.title,""]}),r("section",{className:"w-full container justify-center mb-12",children:t("div",{className:"grid grid-cols-1 md:grid-cols-12 md:gap-x-2 lg:gap-x-8 xl:gap-x-10",children:[r(T,{brands:n,carBrands:d,carModels:a,categories:i,filters:b,routeParam:l.slug}),t("div",{className:"md:col-span-8 lg:col-span-9 mt-6 md:mt-0",children:[t("h2",{className:"font-bold text-2xl pb-6",children:["زیردسته های موجود در : ",l.title]}),l.children&&l.children.length>0&&t("section",{className:"bembla relative",children:[r("div",{className:"bembla__viewport",ref:N,children:r("div",{className:"bembla__container",children:l.children.map((e,m)=>r("div",{className:"bembla__slide",children:t(K,{children:[r("figure",{children:e.image!==null?r("img",{src:route("file.show",{file:e.image,dir:"category/"}),className:"h-22",alt:"slide"}):r("img",{src:"/thumbnail.webp",className:"h-22",alt:"slide"})}),t("div",{className:"card-body text-center p-2",children:[r(j,{href:route("home.getCategory",e.slug),children:r("h2",{className:"card-title justify-center text-sm",children:e.title})}),e.description!==null&&r("p",{children:e.description})]})]})},m))})}),t("div",{className:"bembla__controls",children:[t("div",{className:"bembla__buttons",children:[r(z,{onClick:y,disabled:S}),r(G,{onClick:_,disabled:C})]}),r(Q,{selectedSnap:B,snapCount:k})]})]}),t("div",{className:"my-8 text-left",children:[r("label",{htmlFor:"cars",children:"مرتب سازی"}),t("select",{name:"cars",id:"cars",className:"border-[1px] border-gray-300 px-1 mx-2",value:v,onChange:e=>P(e),children:[r("option",{value:["created_at","desc"],children:"جدیدترین"}),r("option",{value:["price","asc"],children:"ارزانترین"}),r("option",{value:["price","desc"],children:"گرانترین"})]})]}),r("div",{className:"-mx-px grid grid-cols-1 border-l border-gray-200 sm:mx-0  sm:grid-cols-2 lg:grid-cols-4 ",children:o.map((e,m)=>r(W,{product:e,handleAdd:()=>w(e),handleWish:()=>L(e)},m))}),r("div",{className:"border-[1px] border-gray-200 mt-8"})]})]})})]})}U.layout=s=>r(F,{isSingle:!0,children:s});export{U as default};
