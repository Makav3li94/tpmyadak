import{j as e,u as F,b as i,l as u}from"./error-baundry-BidbxAZT.js";import{M as H}from"./modal-WnHntC5V.js";import{C}from"./chevron-left-Bp6mrRkZ.js";import{C as _}from"./chevron-right-BOu120xf.js";import{S as D}from"./spinner-0NNWyG-r.js";import{L as X,c as G,S as J}from"./textarea-input-CD_7fYAM.js";import{c as K,d as Q}from"./hooks-DLZW9gSf.js";import{X as U}from"./x-CXsV8Ryh.js";const V=({active:n,label:l,page:c,onPageChange:r})=>{const a=n?"join-item btn btn-active":"join-item btn";return l==="&laquo; Previous"?e.jsx("button",{onClick:()=>r(+c-1),className:"join-item btn","aria-label":"Previous",children:e.jsx(C,{className:"w-4 h-4"})}):l=="Next &raquo;"?e.jsx("button",{onClick:()=>r(+c+1),className:"join-item btn",children:e.jsx(_,{className:"w-4 h-4"})}):e.jsx("button",{className:a,onClick:()=>r(l),children:l})},W=({label:n})=>n==="&laquo; Previous"?e.jsx("button",{className:"join-item btn btn-disabled","aria-label":"Previous",children:e.jsx(C,{className:"w-4 h-4 text-base-content"})}):n=="Next &raquo;"?e.jsx("button",{className:"join-item btn btn-disabled","aria-label":"Next",children:e.jsx(_,{className:"w-4 h-4 text-base-content"})}):e.jsx("button",{className:"join-item btn btn-disabled",children:n}),Y=({links:n,page:l,onPageChange:c})=>n.links.length===3?null:e.jsx("nav",{children:e.jsx("div",{className:"inline-flex items-center",children:e.jsx("div",{className:"join",children:n.links.map(({active:r,label:a,url:h},d)=>h===null?e.jsx(W,{label:a},`${a}-${d}`):e.jsx(V,{label:a,active:r,page:l,onPageChange:c},`${a}-${d}`))})})});function le(n){const{props:{auth:l}}=F(),{label:c,error:r,value:a,onChange:h,onRemove:d,params:t,placeholder:$="",size:k,readOnly:b=!1,required:q=!1,title:P,additionalButton:v=null}=n,[R]=i.useState(t.columns.split("|").filter(s=>s!=="id")),[I,N]=i.useState([]),[L,y]=i.useState([]),[g,S]=i.useState(""),[w,O]=i.useState(""),j=K(w,750),[m,A]=i.useState(),p=()=>{A(!m)},[x,f,B]=Q(l,{table:t.table,display_name:t.columns,raw_query:t.raw_query,orderby:t.orderby,limit:t.limit,q:j,pagination:"true"}),M=typeof d=="function"&&!u.isEmpty(g),T=s=>{h(s),p()};i.useEffect(()=>{if(u.isEmpty(t.headers)===!0){N(t.columns.split("|").filter(s=>s!=="id")),y(t.columns.split("|").filter(s=>s!=="id"));return}N(t.headers.split("|").map((s,o)=>t.columns.split("|").filter(z=>z!=="id")[o])),y(t.headers.split("|").map(s=>s.includes(".")?s.split(".")[1]:s))},[t]),i.useEffect(()=>{m===!0&&f(1)},[m]),i.useEffect(()=>{f(1,{q:j})},[j]),i.useEffect(()=>{if(u.isEmpty(a)===!1){let s=R;u.isEmpty(t.display_name)===!1&&(s=t.display_name.split("|")),S(s.filter(o=>u.isEmpty(a[o])===!1).map(o=>a[o]).join(" | "))}else S("")},[a]);const E=b===!1&&M;return e.jsxs(e.Fragment,{children:[e.jsxs("fieldset",{className:"fieldset",children:[e.jsx(X,{label:c}),e.jsxs("div",{className:"join",children:[e.jsx("input",{className:`input w-full ${r?"input-error":""}  ${E?"border-r-0 rounded-r-none":""}`,value:g,onClick:b?null:p,placeholder:$??null,readOnly:!0,required:q}),E&&e.jsx("div",{className:`join-item btn ${r?"border-error":""}`,onClick:d,children:e.jsx(U,{className:"h-4 w-4"})}),v&&e.jsx("div",{className:"join-item rounded-none",children:v})]}),e.jsx(G,{error:r})]}),e.jsxs(H,{isOpen:m,onClose:p,size:k,title:P,children:[e.jsx("div",{className:"mb-3"}),e.jsx(J,{value:w,onChange:s=>O(s.target.value)}),B?e.jsxs("div",{className:"w-full flex justify-center items-center gap-4 mt-3 h-36",children:[e.jsx(D,{}),e.jsx("div",{children:"Loading "})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("table",{className:"table mt-3",children:[e.jsx("thead",{children:e.jsx("tr",{children:L.map(s=>e.jsx("th",{className:"capitalize",children:"عنوان"},`header-${s}`))})}),e.jsx("tbody",{children:x.data?.map(s=>e.jsx("tr",{onClick:()=>T(s),className:"hover:bg-base-300",children:I.map(o=>e.jsx("td",{children:s[o]},`${s.id}-${o}`))},s.id))})]})}),e.jsx("div",{className:"w-full flex justify-center mt-2",children:e.jsx(Y,{links:x,page:x.current_page,onPageChange:f})})]})]})]})}export{le as S};
