import{b,j as P}from"./index-Drr-5sAG.js";import{p as n}from"./index-Boicb3Tv.js";var S=function(){return S=Object.assign||function(t){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},S.apply(this,arguments)},x={onActivate:n.func,onAddUndo:n.func,onBeforeAddUndo:n.func,onBeforeExecCommand:n.func,onBeforeGetContent:n.func,onBeforeRenderUI:n.func,onBeforeSetContent:n.func,onBeforePaste:n.func,onBlur:n.func,onChange:n.func,onClearUndos:n.func,onClick:n.func,onContextMenu:n.func,onCommentChange:n.func,onCompositionEnd:n.func,onCompositionStart:n.func,onCompositionUpdate:n.func,onCopy:n.func,onCut:n.func,onDblclick:n.func,onDeactivate:n.func,onDirty:n.func,onDrag:n.func,onDragDrop:n.func,onDragEnd:n.func,onDragGesture:n.func,onDragOver:n.func,onDrop:n.func,onExecCommand:n.func,onFocus:n.func,onFocusIn:n.func,onFocusOut:n.func,onGetContent:n.func,onHide:n.func,onInit:n.func,onInput:n.func,onKeyDown:n.func,onKeyPress:n.func,onKeyUp:n.func,onLoadContent:n.func,onMouseDown:n.func,onMouseEnter:n.func,onMouseLeave:n.func,onMouseMove:n.func,onMouseOut:n.func,onMouseOver:n.func,onMouseUp:n.func,onNodeChange:n.func,onObjectResizeStart:n.func,onObjectResized:n.func,onObjectSelected:n.func,onPaste:n.func,onPostProcess:n.func,onPostRender:n.func,onPreProcess:n.func,onProgressState:n.func,onRedo:n.func,onRemove:n.func,onReset:n.func,onSaveContent:n.func,onSelectionChange:n.func,onSetAttrib:n.func,onSetContent:n.func,onShow:n.func,onSubmit:n.func,onUndo:n.func,onVisualAid:n.func,onSkinLoadError:n.func,onThemeLoadError:n.func,onModelLoadError:n.func,onPluginLoadError:n.func,onIconsLoadError:n.func,onLanguageLoadError:n.func,onScriptsLoad:n.func,onScriptsLoadError:n.func},A=S({apiKey:n.string,licenseKey:n.string,id:n.string,inline:n.bool,init:n.object,initialValue:n.string,onEditorChange:n.func,value:n.string,tagName:n.string,tabIndex:n.number,cloudChannel:n.string,plugins:n.oneOfType([n.string,n.array]),toolbar:n.oneOfType([n.string,n.array]),disabled:n.bool,readonly:n.bool,textareaName:n.string,tinymceScriptSrc:n.oneOfType([n.string,n.arrayOf(n.string),n.arrayOf(n.shape({src:n.string,async:n.bool,defer:n.bool}))]),rollback:n.oneOfType([n.number,n.oneOf([!1])]),scriptLoading:n.shape({async:n.bool,defer:n.bool,delay:n.number})},x),M=function(t){var r=t;return r&&r.tinymce?r.tinymce:null},E=function(t){return typeof t=="function"},O=function(t){return t in x},L=function(t){return t.substr(2)},K=function(t,r,o,a,i,s,e){var u=Object.keys(i).filter(O),c=Object.keys(s).filter(O),l=u.filter(function(f){return s[f]===void 0}),d=c.filter(function(f){return i[f]===void 0});l.forEach(function(f){var p=L(f),v=e[p];o(p,v),delete e[p]}),d.forEach(function(f){var p=a(t,f),v=L(f);e[v]=p,r(v,p)})},H=function(t,r,o,a,i){return K(i,t.on.bind(t),t.off.bind(t),function(s,e){return function(u){var c;return(c=s(e))===null||c===void 0?void 0:c(u,t)}},r,o,a)},T=0,N=function(t){var r=Date.now(),o=Math.floor(Math.random()*1e9);return T++,t+"_"+o+T+String(r)},D=function(t){return t!==null&&(t.tagName.toLowerCase()==="textarea"||t.tagName.toLowerCase()==="input")},j=function(t){return typeof t>"u"||t===""?[]:Array.isArray(t)?t:t.split(" ")},U=function(t,r){return j(t).concat(j(r))},V=function(){return window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"},z=function(t){if(!("isConnected"in Node.prototype)){for(var r=t,o=t.parentNode;o!=null;)r=o,o=r.parentNode;return r===t.ownerDocument}return t.isConnected},B=function(t,r){t!==void 0&&(t.mode!=null&&typeof t.mode=="object"&&typeof t.mode.set=="function"?t.mode.set(r):t.setMode(r))},F=function(t){var r=M(t);if(!r)throw new Error("tinymce should have been loaded into global scope");return r},R=function(t){return t.options&&t.options.isRegistered("disabled")},k=function(){return k=Object.assign||function(t){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},k.apply(this,arguments)},G=function(t,r,o){var a,i,s=t.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=r.id,s.src=r.src,s.async=(a=r.async)!==null&&a!==void 0?a:!1,s.defer=(i=r.defer)!==null&&i!==void 0?i:!1;var e=function(){s.removeEventListener("load",e),s.removeEventListener("error",u),o(r.src)},u=function(c){s.removeEventListener("load",e),s.removeEventListener("error",u),o(r.src,c)};s.addEventListener("load",e),s.addEventListener("error",u),t.head&&t.head.appendChild(s)},q=function(t){var r={},o=function(e,u){var c=r[e];c.done=!0,c.error=u;for(var l=0,d=c.handlers;l<d.length;l++){var f=d[l];f(e,u)}c.handlers=[]},a=function(e,u,c){var l=function(C){return c!==void 0?c(C):console.error(C)};if(e.length===0){l(new Error("At least one script must be provided"));return}for(var d=0,f=!1,p=function(C,I){f||(I?(f=!0,l(I)):++d===e.length&&u())},v=0,h=e;v<h.length;v++){var y=h[v],g=r[y.src];if(g)g.done?p(y.src,g.error):g.handlers.push(p);else{var w=N("tiny-");r[y.src]={id:w,src:y.src,done:!1,error:null,handlers:[p]},G(t,k({id:w},y),o)}}},i=function(){for(var e,u=0,c=Object.values(r);u<c.length;u++){var l=c[u],d=t.getElementById(l.id);d!=null&&d.tagName==="SCRIPT"&&((e=d.parentNode)===null||e===void 0||e.removeChild(d))}r={}},s=function(){return t};return{loadScripts:a,deleteScripts:i,getDocument:s}},$=function(){var t=[],r=function(i){var s=t.find(function(e){return e.getDocument()===i});return s===void 0&&(s=q(i),t.push(s)),s},o=function(i,s,e,u,c){var l=function(){return r(i).loadScripts(s,u,c)};e>0?setTimeout(l,e):l()},a=function(){for(var i=t.pop();i!=null;i=t.pop())i.deleteScripts()};return{loadList:o,reinitialize:a}},J=$(),W=(function(){var t=function(r,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])},t(r,o)};return function(r,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");t(r,o);function a(){this.constructor=r}r.prototype=o===null?Object.create(o):(a.prototype=o.prototype,new a)}})(),m=function(){return m=Object.assign||function(t){for(var r,o=1,a=arguments.length;o<a;o++){r=arguments[o];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},m.apply(this,arguments)},_="change keyup compositionend setcontent CommentChange",Q=(function(t){W(r,t);function r(o){var a,i,s,e=t.call(this,o)||this;return e.rollbackTimer=void 0,e.valueCursor=void 0,e.rollbackChange=function(){var u=e.editor,c=e.props.value;u&&c&&c!==e.currentContent&&u.undoManager.ignore(function(){if(u.setContent(c),e.valueCursor&&(!e.inline||u.hasFocus()))try{u.selection.moveToBookmark(e.valueCursor)}catch{}}),e.rollbackTimer=void 0},e.handleBeforeInput=function(u){if(e.props.value!==void 0&&e.props.value===e.currentContent&&e.editor&&(!e.inline||e.editor.hasFocus()))try{e.valueCursor=e.editor.selection.getBookmark(3)}catch{}},e.handleBeforeInputSpecial=function(u){(u.key==="Enter"||u.key==="Backspace"||u.key==="Delete")&&e.handleBeforeInput(u)},e.handleEditorChange=function(u){var c=e.editor;if(c&&c.initialized){var l=c.getContent();e.props.value!==void 0&&e.props.value!==l&&e.props.rollback!==!1&&(e.rollbackTimer||(e.rollbackTimer=window.setTimeout(e.rollbackChange,typeof e.props.rollback=="number"?e.props.rollback:200))),l!==e.currentContent&&(e.currentContent=l,E(e.props.onEditorChange)&&e.props.onEditorChange(l,c))}},e.handleEditorChangeSpecial=function(u){(u.key==="Backspace"||u.key==="Delete")&&e.handleEditorChange(u)},e.initialise=function(u){var c,l,d;u===void 0&&(u=0);var f=e.elementRef.current;if(f){if(!z(f)){if(u===0)setTimeout(function(){return e.initialise(1)},1);else if(u<100)setTimeout(function(){return e.initialise(u+1)},100);else throw new Error("tinymce can only be initialised when in a document");return}var p=F(e.view),v=m(m(m(m({},e.props.init),{selector:void 0,target:f,disabled:e.props.disabled,readonly:e.props.readonly,inline:e.inline,plugins:U((c=e.props.init)===null||c===void 0?void 0:c.plugins,e.props.plugins),toolbar:(l=e.props.toolbar)!==null&&l!==void 0?l:(d=e.props.init)===null||d===void 0?void 0:d.toolbar}),e.props.licenseKey?{license_key:e.props.licenseKey}:{}),{setup:function(h){e.editor=h,e.bindHandlers({}),e.inline&&!D(f)&&h.once("PostRender",function(y){h.setContent(e.getInitialValue(),{no_events:!0})}),e.props.init&&E(e.props.init.setup)&&e.props.init.setup(h),e.props.disabled&&(R(e.editor)?e.editor.options.set("disabled",e.props.disabled):e.editor.mode.set("readonly"))},init_instance_callback:function(h){var y,g=e.getInitialValue();e.currentContent=(y=e.currentContent)!==null&&y!==void 0?y:h.getContent(),e.currentContent!==g&&(e.currentContent=g,h.setContent(g),h.undoManager.clear(),h.undoManager.add(),h.setDirty(!1)),e.props.init&&E(e.props.init.init_instance_callback)&&e.props.init.init_instance_callback(h)}});e.inline||(f.style.visibility=""),D(f)&&(f.value=e.getInitialValue()),p.init(v)}},e.id=e.props.id||N("tiny-react"),e.elementRef=b.createRef(),e.inline=(s=(a=e.props.inline)!==null&&a!==void 0?a:(i=e.props.init)===null||i===void 0?void 0:i.inline)!==null&&s!==void 0?s:!1,e.boundHandlers={},e}return Object.defineProperty(r.prototype,"view",{get:function(){var o,a;return(a=(o=this.elementRef.current)===null||o===void 0?void 0:o.ownerDocument.defaultView)!==null&&a!==void 0?a:window},enumerable:!1,configurable:!0}),r.prototype.componentDidUpdate=function(o){var a=this,i,s;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(o),this.editor.initialized)){if(this.currentContent=(i=this.currentContent)!==null&&i!==void 0?i:this.editor.getContent(),typeof this.props.initialValue=="string"&&this.props.initialValue!==o.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if(typeof this.props.value=="string"&&this.props.value!==this.currentContent){var e=this.editor;e.undoManager.transact(function(){var c;if(!a.inline||e.hasFocus())try{c=e.selection.getBookmark(3)}catch{}var l=a.valueCursor;if(e.setContent(a.props.value),!a.inline||e.hasFocus())for(var d=0,f=[c,l];d<f.length;d++){var p=f[d];if(p)try{e.selection.moveToBookmark(p),a.valueCursor=p;break}catch{}}})}if(this.props.readonly!==o.readonly){var u=(s=this.props.readonly)!==null&&s!==void 0?s:!1;B(this.editor,u?"readonly":"design")}this.props.disabled!==o.disabled&&(R(this.editor)?this.editor.options.set("disabled",this.props.disabled):B(this.editor,this.props.disabled?"readonly":"design"))}},r.prototype.componentDidMount=function(){var o=this,a,i,s,e,u;if(M(this.view)!==null)this.initialise();else if(Array.isArray(this.props.tinymceScriptSrc)&&this.props.tinymceScriptSrc.length===0)(i=(a=this.props).onScriptsLoadError)===null||i===void 0||i.call(a,new Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array."));else if(!((s=this.elementRef.current)===null||s===void 0)&&s.ownerDocument){var c=function(){var d,f;(f=(d=o.props).onScriptsLoad)===null||f===void 0||f.call(d),o.initialise()},l=function(d){var f,p;(p=(f=o.props).onScriptsLoadError)===null||p===void 0||p.call(f,d)};J.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),(u=(e=this.props.scriptLoading)===null||e===void 0?void 0:e.delay)!==null&&u!==void 0?u:0,c,l)}},r.prototype.componentWillUnmount=function(){var o=this,a=this.editor;a&&(a.off(_,this.handleEditorChange),a.off(this.beforeInputEvent(),this.handleBeforeInput),a.off("keypress",this.handleEditorChangeSpecial),a.off("keydown",this.handleBeforeInputSpecial),a.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(i){a.off(i,o.boundHandlers[i])}),this.boundHandlers={},a.remove(),this.editor=void 0)},r.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},r.prototype.beforeInputEvent=function(){return V()?"beforeinput SelectionChange":"SelectionChange"},r.prototype.renderInline=function(){var o=this.props.tagName,a=o===void 0?"div":o;return b.createElement(a,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.renderIframe=function(){return b.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},r.prototype.getScriptSources=function(){var o,a,i=(o=this.props.scriptLoading)===null||o===void 0?void 0:o.async,s=(a=this.props.scriptLoading)===null||a===void 0?void 0:a.defer;if(this.props.tinymceScriptSrc!==void 0)return typeof this.props.tinymceScriptSrc=="string"?[{src:this.props.tinymceScriptSrc,async:i,defer:s}]:this.props.tinymceScriptSrc.map(function(l){return typeof l=="string"?{src:l,async:i,defer:s}:l});var e=this.props.cloudChannel,u=this.props.apiKey?this.props.apiKey:"no-api-key",c="https://cdn.tiny.cloud/1/".concat(u,"/tinymce/").concat(e,"/tinymce.min.js");return[{src:c,async:i,defer:s}]},r.prototype.getInitialValue=function(){return typeof this.props.initialValue=="string"?this.props.initialValue:typeof this.props.value=="string"?this.props.value:""},r.prototype.bindHandlers=function(o){var a=this;if(this.editor!==void 0){H(this.editor,o,this.props,this.boundHandlers,function(u){return a.props[u]});var i=function(u){return u.onEditorChange!==void 0||u.value!==void 0},s=i(o),e=i(this.props);!s&&e?(this.editor.on(_,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):s&&!e&&(this.editor.off(_,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},r.propTypes=A,r.defaultProps={cloudChannel:"8"},r})(b.Component);const Z=({value:t,what:r,setData:o})=>{const a=b.useRef(null),i=s=>{o(r,s)};return P.jsx(Q,{onInit:(s,e)=>a.current=e,apiKey:"7eb0iwo09eiaf94h6xdhr6xe8feiourwa44k1k09zp2jreum",name:"about",value:t,init:{height:200,menubar:!0,directionality:"rtl",plugins:["directionality","advlist","autolink","lists","link","image","charmap","preview","anchor","searchreplace","visualblocks","code","fullscreen","insertdatetime","media","table","code","help","wordcount","quickbars"],toolbar:"undo redo | blocks | bold italic underline forecolor | fontselect fontsizeselect formatselect | alignleft aligncenter alignright alignjustify |  numlist bullist | forecolor backcolor removeformat | pagebreak | charmap emoticons | fullscreen  preview save  |   image   link   | ltr rtl",toolbar_sticky:!0,content_style:"body { font-family:IRANSans,sans-serif; font-size:14px }",extended_valid_elements:"img[class|src|border=0|alt|title|hspace|vspace|width|height|align|onmouseover|onmouseout|name|loading=lazy]",image_title:!0,language:"fa",automatic_uploads:!0,images_upload_url:route("admin.tiny.upload"),file_picker_types:"image",file_picker_callback:function(s,e,u){let c=document.createElement("input");c.setAttribute("type","file"),c.setAttribute("accept","image/*"),c.onchange=function(){let l=this.files[0],d=new FileReader;d.readAsDataURL(l),d.onload=function(){let f="blobid"+new Date().getTime(),p=tinymce.activeEditor.editorUpload.blobCache,v=d.result.split(",")[1],h=p.create(f,l,v);p.add(h),s(h.blobUri(),{title:l.name})}},c.click()}},onEditorChange:i})};export{Z as T};
