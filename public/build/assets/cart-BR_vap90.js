import{b as c,j as e,L as x}from"./index-DDca1aiV.js";import{u as v}from"./react-use-cart.esm-B9s7uaXZ.js";import{s as S,n as L}from"./textarea-input-Bmdp0oLw.js";import{B as h}from"./button-XQ7iUB_I.js";import{O as C}from"./order-layout-CbMO9BVH.js";import{P as I}from"./plus-J8VVJKn2.js";import{M as q}from"./minus-CTVTFXQ9.js";import{X as _}from"./x-C5pP27M6.js";import{c as u}from"./createLucideIcon-RXBZCcM_.js";import"./search-myPFLCWv.js";import"./spinner-D5QHHuo0.js";import"./index-DDQ21QUK.js";import"./logo-C8A0auOY.js";import"./chevron-left-DQg-zfff.js";const M=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],T=u("check",M);const E=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],P=u("clock",E);function z(o){const[d,p]=c.useState(!1),{items:i,updateItemQuantity:n,cartTotal:f}=v(),[g,y]=c.useState(0),[m,j]=c.useState(0),[b,N]=c.useState(!1);async function k(){const{data:s}=await axios.post(route("home.cart.refresh"),{items:i});let l=!1;s.forEach(a=>{const r=i.find(t=>t.id===a.id);r&&((parseInt(r.price)!==parseInt(a.price)||parseInt(r.discount||0)!==parseInt(a.discount||0))&&(l=!0,r.price=a.price,r.discount=a.discount),n(a.id,a.quantity))}),N(l),w(s)}function w(s=i){let l=s.reduce((r,t)=>r+(t.discount===null,parseInt(t.price)*t.quantity),0),a=s.reduce((r,t)=>r+(t.discount===null?0:parseInt(t.discount)*t.quantity),0);y(l),j(a)}return c.useEffect(()=>{k().then(()=>{b&&S("قیمت برخی محصولات تغییر کرده و به‌روز شدند!")}),p(!0)},[]),e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"sr-only",children:"سبد خرید"}),e.jsxs("section",{"aria-labelledby":"summary-heading",className:"bg-gray-50 px-4 pb-10 pt-16 sm:px-6 lg:col-start-1 lg:row-start-1 lg:bg-transparent lg:px-0 lg:pb-16",children:[e.jsx("h2",{id:"cart-heading",className:"sr-only",children:"محصولات موجود در سبد"}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 border-b border-t border-gray-200",children:d&&i.map((s,l)=>e.jsxs("li",{className:"flex py-6 sm:py-10   bg-base-100 card-sm shadow-sm ",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{alt:s.title,src:`https://cdn.tpmyadak.com/prothumb/${s.image}`,className:"h-24 w-24 rounded-md object-cover object-center sm:h-48 sm:w-48"})}),e.jsxs("div",{className:"ml-4 flex flex-1 flex-col justify-between sm:ml-6",children:[e.jsxs("div",{className:"relative pr-9 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:pr-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h3",{className:"text-sm",children:e.jsx(x,{href:s.sku,className:"font-medium text-gray-700 hover:text-gray-800",children:s.title})})}),e.jsxs("div",{className:"mt-1 flex text-sm",children:[e.jsx("p",{className:"text-gray-500",children:"test1"}),s.size?e.jsx("p",{className:"ml-4 border-l border-gray-200 pl-4 text-gray-500",children:s.size}):null]}),e.jsxs("p",{className:"mt-1 text-sm font-medium text-gray-900",children:[parseInt(s.price).toLocaleString("en")," تومان"]})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 sm:pr-9",children:[e.jsx("div",{className:"absolute left-0 top-20",children:e.jsxs("ul",{className:"action flex items-center list-unstyled justify-center gap-3 ",children:[e.jsx("li",{className:"edit",children:e.jsx(h,{type:"success",className:"btn-xs",onClick:()=>n(s.id,s.quantity+1),children:e.jsx(I,{className:"fs-6_5  align-middle "})})}),e.jsx("li",{className:"edit",children:parseInt(s.quantity).toLocaleString("en")}),e.jsx("li",{className:"edit",children:e.jsx(h,{type:"warning",className:"btn-xs",onClick:a=>n(s.id,s.quantity-1),children:e.jsx(q,{className:"fs-6_5  align-middle "})})})]})}),e.jsx("div",{className:"absolute left-0 top-0",children:e.jsxs("button",{type:"button",onClick:()=>removeItem(s.id),className:"-m-2 inline-flex p-2 text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"حذف"}),e.jsx(_,{"aria-hidden":"true",className:"h-5 w-5"})]})})]})]}),e.jsxs("p",{className:"mt-4 flex space-x-2 text-sm text-gray-700",children:[s.stock?e.jsx(T,{"aria-hidden":"true",className:"h-5 w-5 flex-shrink-0 text-green-500"}):e.jsx(P,{"aria-hidden":"true",className:"h-5 w-5 flex-shrink-0 text-gray-300"}),e.jsx("span",{children:s.stock?"موحود در انبار":"ارسال تا 7 روز"})]})]})]},l))})]}),e.jsxs("section",{"aria-labelledby":"summary-heading",className:"px-4 pb-36 pt-16 sm:px-6 lg:col-start-2 lg:row-start-1 lg:px-0 lg:pb-16",children:[e.jsx("h2",{id:"summary-heading",className:"text-lg font-medium text-gray-900",children:"خلاصه سبد"}),d&&e.jsxs("dl",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-sm text-gray-600",children:"مجموع"}),e.jsx("dd",{className:"text-sm font-medium text-gray-900",children:g.toLocaleString("en")})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:[e.jsx("dt",{className:"flex items-center text-sm text-gray-600",children:e.jsx("span",{children:"تخفیف"})}),e.jsx("dd",{className:"text-sm font-medium text-gray-900",children:m.toLocaleString("en")})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:[e.jsx("dt",{className:"text-base font-medium text-gray-900",children:"قابل پرداخت"}),e.jsx("dd",{className:"text-base font-medium text-gray-900",children:L((parseInt(f)-m).toLocaleString("en"))})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(x,{href:route("home.checkout"),className:"block text-center w-full rounded-md border border-transparent bg-red-600 px-4 py-3 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50",children:"رفتن به صفحه صورتحساب"})})]})]})}z.layout=o=>e.jsx(C,{children:o});export{z as default};
