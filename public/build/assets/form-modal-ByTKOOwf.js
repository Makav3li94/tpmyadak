import{g as C,b as c,l as d,j as r}from"./index-DDca1aiV.js";import{T as i}from"./textarea-input-D1X_UlTc.js";import{B as p}from"./button-XQ7iUB_I.js";import{M as v}from"./modal-_zPzG4Kk.js";import{S as E}from"./select-modal-input-C0ThAG5f.js";import"./createLucideIcon-RXBZCcM_.js";import"./search-myPFLCWv.js";import"./spinner-D5QHHuo0.js";import"./x-C5pP27M6.js";import"./chevron-left-DQg-zfff.js";import"./chevron-right-BbGDDnQ9.js";import"./hooks-C1aZXtTk.js";function q(m){const{modalState:o,orderId:x}=m,s=o.data,{data:e,setData:l,post:b,put:h,processing:f,errors:a,reset:_,clearErrors:g}=C({order_id:x,product_id:"",product:"",title:"",amount:"",unit:"",total_price:"",discount:0,tax:0,attribute:""}),n=t=>{l(t.target.name,t.target.type==="checkbox"?t.target.checked?1:0:t.target.value)},j=()=>{o.setData(null),_(),g()},u=()=>{j(),o.toggle()},y=t=>{if(t.preventDefault(),s!==null){h(route("admin.order.details.update",s),{onSuccess:()=>u()});return}b(route("admin.order.details.store"),{onSuccess:()=>u()})};return c.useEffect(()=>{const t=o.data;d.isEmpty(t)===!1&&l({order_id:t.order_id,product_id:t.product_id,title:t.title,amount:t.amount,unit:t.unit,total_price:t.total_price,tax:t.tax,attribute:t.attribute})},[o]),c.useEffect(()=>{l("total_price",e.amount*e.unit)},[e.unit]),r.jsx(v,{isOpen:o.isOpen,onClose:u,title:"ایتم صفارش",children:r.jsxs("form",{className:"form-control space-y-2.5",onSubmit:y,children:[r.jsx(E,{label:"محصول",value:e.product,onChange:t=>l({...e,product:t,amount:t.price,title:t.title,unit:t.minimum,discount:t.discount!==null&&t.discount!==0?t.discount:0,total_price:t.minimum*t.price,product_id:t?t.id:null}),onRemove:()=>l({...e,product:"",product_id:null}),error:a.product_id,params:{table:"products",columns:"id|title|price|minimum|discount",orderby:"created_at.asc"}}),(e.product||!d.isEmpty(s))&&r.jsxs(r.Fragment,{children:[r.jsx(i,{name:"title",value:e.title,onChange:n,label:"عنوان",error:a.title}),r.jsx(i,{name:"amount",value:e.amount,onChange:n,label:"قیمت محصول",error:a.amount}),r.jsx(i,{name:"unit",value:e.unit,onChange:n,label:"تعداد",type:"number",min:1,error:a.unit})]}),r.jsx(i,{name:"total_price",value:e.total_price,onChange:n,label:"قبمت کل",type:"number",readOnly:!0,min:e.total_price,error:a.total_price}),r.jsx(i,{name:"tax",value:e.tax,onChange:n,label:"مالیات",type:"number",min:0,error:a.tax}),r.jsx(i,{name:"attribute",value:e.attribute,onChange:n,label:"ویژگی(سایز،رنگ و ... )",error:a.attribute}),r.jsxs("div",{className:"flex items-center space-x-2 mt-4 w-full justify-around",children:[r.jsx(p,{processing:f,btnType:"submit",type:"primary",children:"ذخیره"}),r.jsx(p,{onClick:u,type:"secondary",children:"انصراف"})]})]})})}export{q as default};
