import{u as y,b as f,l as n,j as e,H as v,L as S,d}from"./index-DDca1aiV.js";import{A as g}from"./authenticated-layout-BuPpUsr6.js";import{s as E}from"./textarea-input-D1X_UlTc.js";import{B as l}from"./button-XQ7iUB_I.js";import{C}from"./card-BhTpkvGO.js";import{R as F}from"./constants-CxROEh6M.js";import{RenderFormInput as N}from"./render-form-input-BC2lszPN.js";import"./index-DDQ21QUK.js";import"./x-C5pP27M6.js";import"./createLucideIcon-RXBZCcM_.js";import"./user-profile-menu-DgcEU99t.js";import"./car-DkodfHbk.js";import"./theme-switch-CeGAbILo.js";import"./hooks-C1aZXtTk.js";import"./search-myPFLCWv.js";import"./spinner-D5QHHuo0.js";import"./checkbox-CXquuARA.js";import"./select-input-DZAYiz3q.js";function D(){const{props:{field:t,item:m}}=y(),[o,u]=f.useState(JSON.parse(t.fields)),[c,a]=f.useState(!1),p=(r,s)=>{u(o.map(i=>(r.id===i.id&&(i.value=s),i)))},x=()=>{if(h()){if(n.isEmpty(m)){d.post(route("custom-form.form-records.store",t),{fields:JSON.stringify(o)},{onStart:()=>a(!0),onFinish:r=>{a(!1)}});return}d.put(route("custom-form.form-records.update",{form:t,formRecord:m}),{fields:JSON.stringify(o)},{onStart:()=>a(!0),onFinish:r=>{a(!1)}})}},h=()=>!o.map(s=>n.isEmpty(s.value)&&s.required===F.yes?(E(`${s.name} is required`,"error"),!1):!0).includes(!1);return f.useEffect(()=>{if(n.isEmpty(m))return;const r=JSON.parse(m.fields);u(o.map(s=>{const i=r.find(j=>j.id===s.id);return n.isEmpty(i)||(s.value=i.value),s}))},[]),e.jsxs(g,{title:"Custom Form",breadcumbs:[{name:"Custom Form",href:route("custom-form.forms.index")},{name:`Form - ${t.name}`,href:route("custom-form.form-records.index",t)}],children:[e.jsx(v,{title:`Record - ${t.name}`}),e.jsx("div",{children:e.jsx(C,{children:e.jsxs("div",{className:"flex flex-col gap-2 justify-between",children:[o.map(r=>e.jsx(N,{input:r,onChange:p},r.name)),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(l,{onClick:x,processing:c,type:"primary",children:"Simpan"}),e.jsx(S,{href:route("custom-form.form-records.index",t),children:e.jsx(l,{type:"secondary",children:"Kembali"})})]})})]})})})]})}export{D as default};
