import{b as d,l as N,d as g,j as s,H as k}from"./index-DDca1aiV.js";import{C}from"./react-apexcharts.min-CE7GYt23.js";import{u as _}from"./hooks-C1aZXtTk.js";import{f as y,s as D}from"./textarea-input-D1X_UlTc.js";import{A as E}from"./authenticated-layout-BuPpUsr6.js";import{B as o}from"./button-XQ7iUB_I.js";import{C as c}from"./card-BhTpkvGO.js";import{P as S}from"./pagination-BARGUo9o.js";import P from"./json-modal-acgMV1En.js";import{u as T}from"./usePrevious-CdWrhvz4.js";import{C as M}from"./clipboard-copy-C99DehYP.js";import{E as n}from"./user-profile-menu-DgcEU99t.js";import"./index-Chjiymov.js";import"./createLucideIcon-RXBZCcM_.js";import"./search-myPFLCWv.js";import"./index-DDQ21QUK.js";import"./x-C5pP27M6.js";import"./car-DkodfHbk.js";import"./theme-switch-CeGAbILo.js";import"./spinner-D5QHHuo0.js";import"./chevron-left-DQg-zfff.js";import"./chevron-right-BbGDDnQ9.js";import"./modal-_zPzG4Kk.js";function rs(h){const{link:t,data:{links:x,data:m},charts:i,_startDate:j,_endDate:p}=h,f={chart:{id:"visitor-bar"},grid:{show:!1},xaxis:{categories:i.map(e=>e.date),lines:{show:!1}},yaxis:{lines:{show:!1}}},u=[{name:"visitor",data:i.map(e=>e.visitor)}],[a,A]=d.useState({start_date:j,end_date:p}),v=T(a),r=_(),l=e=>{r.setData(e),r.toggle()},w=()=>{D("copied to clipboard","success"),navigator.clipboard.writeText(route("shortlink.redirect",t))},b={...a};return d.useEffect(()=>{N.isEmpty(a.endDate)||v&&g.get(route(route().current(),t),a,{replace:!0,preserveState:!0})},[a]),s.jsxs(E,{title:"Link Detail",breadcumbs:[{name:"Shortlink",href:route("shortlink.link.index")},{name:"Show",href:route("shortlink.link.show",t)}],children:[s.jsx(k,{title:"Shortlink"}),s.jsxs("div",{className:"w-full flex flex-col gap-4",children:[s.jsx("div",{children:s.jsxs("div",{className:"grid md:grid-cols-3 gap-2",children:[s.jsx("div",{className:"stats bg-base-100 shadow flex-1",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title",children:"Total Visitor"}),s.jsx("div",{className:"stat-value text-primary",children:t.visit_count}),s.jsxs("div",{className:"stat-desc",children:[t.last_visited_at," "]})]})}),s.jsx("div",{className:"stats bg-base-100 shadow",children:s.jsxs("div",{className:"stat",children:[s.jsx("div",{className:"stat-title text-xl",children:t.name}),s.jsx("div",{className:"stat-desc",children:s.jsxs("div",{className:"flex flex-row items-center gap-2",onClick:w,children:[s.jsx("div",{children:route("shortlink.redirect",t)}),s.jsx(M,{className:"h-5 w-5"})]})})]})}),s.jsx("div",{className:"stats bg-base-100 shadow",children:s.jsx("div",{className:"stat text-xs hover:underline hover:text-blue-700",children:s.jsx("a",{href:t.real_link,target:"_blank",children:t.real_link})})})]})}),s.jsx(c,{children:s.jsx("div",{className:"w-full h-[270px]",children:s.jsx(C,{options:f,series:u,type:"bar",width:"100%",height:"200px"})})}),s.jsxs(c,{children:[s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"table mb-4",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"Device"}),s.jsx("th",{children:"Platform"}),s.jsx("th",{children:"Browser"}),s.jsx("th",{children:"IP"}),s.jsx("th",{children:"Visit At"}),s.jsx("th",{children:"Request"}),s.jsx("th",{children:"Header"})]})}),s.jsx("tbody",{children:m.map((e,B)=>s.jsxs("tr",{children:[s.jsx("td",{children:e.device}),s.jsx("td",{children:e.platform}),s.jsx("td",{children:e.browser}),s.jsx("td",{children:e.ip}),s.jsx("td",{children:y(e.created_at)}),s.jsx("td",{children:s.jsx(o,{onClick:()=>l(e.request),children:s.jsx(n,{className:"h-4 w-4"})})}),s.jsx("td",{children:s.jsx(o,{onClick:()=>l(e.header),children:s.jsx(n,{className:"h-4 w-4"})})})]},e.id))})]})}),s.jsx("div",{className:"w-full overflow-x-auto flex lg:justify-center",children:s.jsx(S,{links:x,params:b})})]})]}),s.jsx(P,{modalState:r})]})}export{rs as default};
