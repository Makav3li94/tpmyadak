import{u as S,b as d,l as j,j as e,H as k,L as O,d as b}from"./error-baundry-BidbxAZT.js";import{A as T}from"./authenticated-layout-1SLO0Xta.js";import{T as v,a as q}from"./textarea-input-CD_7fYAM.js";import{B as p}from"./button-C5z6H_J0.js";import{C as E}from"./card-BPyOgDvQ.js";import{a as g}from"./select-input-6YKQXTsk.js";import{R as u,I as f}from"./constants-CxROEh6M.js";import{T as I}from"./trash-jewLTMBv.js";import{P as L}from"./plus-DmlxZQzL.js";import"./index-DDQ21QUK.js";import"./x-CXsV8Ryh.js";import"./createLucideIcon-DdzWq45B.js";import"./user-profile-menu--c0GZxSI.js";import"./car-B-6ET-mT.js";import"./theme-switch-Dm1-p3wq.js";import"./hooks-DLZW9gSf.js";import"./search-C23mt96Y.js";import"./spinner-0NNWyG-r.js";function Z(P){const{props:{errors:l,item:a}}=S(),[y,i]=d.useState(!1),[c,x]=d.useState(""),[o,n]=d.useState([{name:"",type:f.text,required:u.no,id:crypto.randomUUID()}]),N=()=>{n(o.concat({name:"",type:f.text,required:u.no,id:crypto.randomUUID()}))},m=(s,t,r)=>{n(o.map((h,F)=>(F===r&&(h[s]=t),h)))},C=s=>{n(o.filter((t,r)=>r!==s))},w=()=>{if(j.isEmpty(a)===!1){b.put(route("custom-form.forms.update",a),{name:c,fields:JSON.stringify(o)},{onStart:()=>i(!0),onFinish:s=>{i(!1)}});return}b.post(route("custom-form.forms.store",a),{name:c,fields:JSON.stringify(o)},{onStart:()=>i(!0),onFinish:s=>{i(!1)}})};return d.useEffect(()=>{j.isEmpty(a)||(x(a.name),n(JSON.parse(a.fields)))},[a]),e.jsxs(T,{title:"Custom Form",breadcumbs:[{name:"Module",href:route("admin.dashboard")},{name:"Form",href:a?route("custom-form.forms.edit",a.id):route("custom-form.forms.create")}],children:[e.jsx(k,{title:"Custom Form"}),e.jsx("div",{children:e.jsx(E,{children:e.jsxs("div",{className:"flex flex-col gap-2 justify-between",children:[e.jsx(v,{name:"name",value:c,onChange:s=>x(s.target.value),label:"Name",error:l.name}),e.jsxs("div",{className:`w-full border rounded-md p-2 flex flex-col gap-2 ${l.fields?"border-red-600":"border-gray-600"}`,children:[e.jsx("div",{className:"font-semibold",children:"Form"}),o.map((s,t)=>e.jsxs("div",{className:"border border-gray-600 p-2 rounded-md w-full flex flex-row gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-2",children:[e.jsx("div",{className:"w-full",children:e.jsx(v,{name:"name",value:s.name,onChange:r=>m("name",r.target.value,t),label:"Label"})}),e.jsx("div",{className:"w-full",children:e.jsx(g,{label:"Type",onChange:r=>m("type",r.target.value,t),value:s.type,options:f})}),e.jsx("div",{className:"w-full",children:e.jsx(g,{label:"Required",onChange:r=>m("required",r.target.value,t),value:s.required,options:u})})]}),["select","multiple"].includes(s.type)&&e.jsx("div",{children:e.jsx(q,{label:"Opsi",value:s.options,onChange:r=>m("options",r.target.value,t),placeholder:`masukan opsi, pisahkan tiap opsi dengan koma ( , )
contoh: laki-laki,perempuan`})})]}),e.jsx("div",{className:"btn-xs btn btn-ghost",children:e.jsx(I,{className:"w-4 h-4 text-red-500",onClick:()=>C(t)})})]},t)),l.fields&&e.jsx("p",{className:"label-text text-red-600",children:l.fields}),e.jsx("div",{children:e.jsx(p,{className:"btn-sm btn-outline",onClick:N,children:e.jsx(L,{className:"h-5 w-5"})})})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(p,{onClick:w,processing:y,type:"primary",children:"Simpan"}),e.jsx(O,{href:route("custom-form.forms.index"),children:e.jsx(p,{type:"secondary",children:"Kembali"})})]})})]})})})]})}export{Z as default};
