import{b as u,g as S,l as Y,j as e}from"./index-DDca1aiV.js";import{a as n}from"./textarea-input-Bmdp0oLw.js";import{B as p}from"./button-XQ7iUB_I.js";import{C as D}from"./checkbox-CHFsVXmp.js";import{M as E}from"./modal-_zPzG4Kk.js";import{S as x}from"./select-modal-input-nQRqRJW1.js";import"./select2-input-wkGN2gkH.js";import{F as h}from"./index-B7VSbjXq.js";import"./createLucideIcon-RXBZCcM_.js";import"./search-myPFLCWv.js";import"./spinner-D5QHHuo0.js";import"./x-C5pP27M6.js";import"./chevron-left-DQg-zfff.js";import"./chevron-right-BbGDDnQ9.js";import"./hooks-C1aZXtTk.js";import"./floating-ui.dom-D_CZBSCQ.js";import"./_commonjs-dynamic-modules-TDtrdbi3.js";function Q(g){const[c,f]=u.useState(!1),{modalState:l}=g,d={title:"",user_id:"",product_category_id:"",code:"tpm-",percentage:"",max_limit:"",max_minus:"",active_at:"",expire_at:"",status:""},{data:s,setData:r,post:j,put:_,processing:b,errors:t,clearErrors:v}=S(d),i=a=>{r(a.target.name,a.target.type==="checkbox"?a.target.checked?1:0:a.target.value)},N=()=>{l.setData(null),r(d),v()},o=()=>{N(),l.toggle()},y=a=>{a.preventDefault();const m=l.data;if(m!==null){_(route("admin.discounts.update",m),{onSuccess:()=>o()});return}j(route("admin.discounts.store"),{onSuccess:()=>o()})};u.useEffect(()=>{const a=l.data;Y.isEmpty(a)===!1&&r(a),f(!0)},[l]);const C=a=>{r("active_at",a.format())},M=a=>{r("expire_at",a.format())};return e.jsx(E,{isOpen:l.isOpen,onClose:o,title:"دسته وبلاگ",children:e.jsxs("form",{className:"form-control space-y-2.5",onSubmit:y,children:[e.jsx(n,{name:"title",value:s.title,onChange:i,label:"عنوان",error:t.title}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"basis-1/2",children:e.jsxs("fieldset",{className:"fieldset",children:[e.jsx("legend",{className:"fieldset-legend",children:"تاریخ انتشار"}),e.jsx(h,{format:"YYYY-MM-DD",className:"",lang:"fa",input:e.jsx("input",{className:"w-full input ",placeholder:"تاریخ شروع"}),value:s.active_at,onChange:a=>{C(a)}}),t.active_at&&e.jsx("p",{className:"fieldset-label text-error",children:t.active_at})]})}),e.jsx("div",{className:"basis-1/2",children:e.jsxs("fieldset",{className:"fieldset",children:[e.jsx("legend",{className:"fieldset-legend",children:"تاریخ انقضا"}),e.jsx(h,{format:"YYYY-MM-DD",className:"",lang:"fa",input:e.jsx("input",{className:"w-full input ",placeholder:"تاریخ انقضا"}),value:s.expire_at,onChange:a=>{M(a)}}),t.expire_at&&e.jsx("p",{className:"fieldset-label text-error",children:t.expire_at})]})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"basis-1/2",children:c&&e.jsx(x,{label:"اختصاص به کاربر",value:s.user,onChange:a=>r({...s,user:a,user_id:a?a.id:null}),onRemove:()=>r({...s,user:"",user_id:null}),error:t.user_id,params:{table:"users",columns:"id|name"}})}),e.jsx("div",{className:"basis-1/2",children:c&&e.jsx(x,{label:"اختصاص به دسته",value:s.product_category,onChange:a=>r({...s,product_category:a,product_category_id:a?a.id:null}),onRemove:()=>r({...s,product_category:"",product_category_id:null}),error:t.product_category_id,params:{table:"product_categories",columns:"id|title"}})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"basis-1/2",children:e.jsx(n,{name:"code",value:s.code,onChange:i,dir:"ltr",maxLength:9,label:"کدتخفیف",placeHolder:"tpm-12345",error:t.code,required:!0})}),e.jsx("div",{className:"basis-1/2",children:e.jsx(n,{type:"number",name:"percentage",value:s.percentage,onChange:i,dir:"ltr",label:"درصد تخفیف",min:1,max:100,error:t.percentage})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"basis-1/2",children:e.jsx(n,{type:"number",name:"max_limit",value:s.max_limit,onChange:i,label:"حداکثر استفاده",min:1,error:t.max_limit,required:!0})}),e.jsx("div",{className:"basis-1/2",children:e.jsx(n,{type:"number",name:"max_minus",value:s.max_minus,onChange:i,label:"سقف تخفیف",error:t.max_minus})})]}),e.jsx(D,{label:"فعال",name:"status",value:s.status,onChange:i,error:t.status}),e.jsxs("div",{className:"flex items-center space-x-2 mt-4 justify-around",children:[e.jsx(p,{processing:b,btnType:"submit",type:"primary",children:"ذخیره"}),e.jsx(p,{onClick:o,type:"secondary",children:"انصراف"})]})]})})}export{Q as default};
