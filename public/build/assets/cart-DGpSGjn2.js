import{b as r,j as e,L as u}from"./error-baundry-BidbxAZT.js";import{u as N}from"./react-use-cart.esm-ysIYQ0_l.js";import{n as k}from"./textarea-input-CD_7fYAM.js";import{B as h}from"./button-C5z6H_J0.js";import{O as v}from"./order-layout-CqACnKZm.js";import{P as w}from"./plus-DmlxZQzL.js";import{M as L}from"./minus-B0xrFX-q.js";import{X as S}from"./x-CXsV8Ryh.js";import{c as p}from"./createLucideIcon-DdzWq45B.js";import"./search-C23mt96Y.js";import"./spinner-0NNWyG-r.js";import"./index-DDQ21QUK.js";import"./logo-C8A0auOY.js";import"./chevron-left-Bp6mrRkZ.js";const I=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],C=p("check",I);const _=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],M=p("clock",_);function T(o){const[l,m]=r.useState(!1),[f,g]=r.useState(0),[c,j]=r.useState(0),{items:i,updateItemQuantity:n,removeItem:y,cartTotal:b,isEmpty:q}=N();function x(){let s=i.reduce((a,t)=>a=a+(t.discount===null?t.itemTotal:parseInt(t.price)*t.quantity),0),d=i.reduce((a,t)=>a=a+(t.discount===null?0:parseInt(t.discount)*t.quantity),0);g(s),j(d)}return r.useEffect(()=>{m(!1),x()},[n]),r.useEffect(()=>{l||x(),m(!0)},[l]),console.log(c),e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"sr-only",children:"سبد خرید"}),e.jsxs("section",{"aria-labelledby":"summary-heading",className:"bg-gray-50 px-4 pb-10 pt-16 sm:px-6 lg:col-start-1 lg:row-start-1 lg:bg-transparent lg:px-0 lg:pb-16",children:[e.jsx("h2",{id:"cart-heading",className:"sr-only",children:"محصولات موجود در سبد"}),e.jsx("ul",{role:"list",className:"divide-y divide-gray-200 border-b border-t border-gray-200",children:l&&i.map((s,d)=>e.jsxs("li",{className:"flex py-6 sm:py-10   bg-base-100 card-sm shadow-sm ",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{alt:s.title,src:`https://cdn.tpmyadak.com/prothumb/${s.image}`,className:"h-24 w-24 rounded-md object-cover object-center sm:h-48 sm:w-48"})}),e.jsxs("div",{className:"ml-4 flex flex-1 flex-col justify-between sm:ml-6",children:[e.jsxs("div",{className:"relative pr-9 sm:grid sm:grid-cols-2 sm:gap-x-6 sm:pr-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between",children:e.jsx("h3",{className:"text-sm",children:e.jsx(u,{href:s.sku,className:"font-medium text-gray-700 hover:text-gray-800",children:s.title})})}),e.jsxs("div",{className:"mt-1 flex text-sm",children:[e.jsx("p",{className:"text-gray-500",children:"test1"}),s.size?e.jsx("p",{className:"ml-4 border-l border-gray-200 pl-4 text-gray-500",children:s.size}):null]}),e.jsxs("p",{className:"mt-1 text-sm font-medium text-gray-900",children:[parseInt(s.price).toLocaleString("en")," تومان"]})]}),e.jsxs("div",{className:"mt-4 sm:mt-0 sm:pr-9",children:[e.jsx("div",{className:"absolute left-0 top-20",children:e.jsxs("ul",{className:"action flex items-center list-unstyled justify-center gap-3 ",children:[e.jsx("li",{className:"edit",children:e.jsx(h,{type:"success",className:"btn-xs",onClick:()=>n(s.id,s.quantity+1),children:e.jsx(w,{className:"fs-6_5  align-middle "})})}),e.jsx("li",{className:"edit",children:parseInt(s.quantity).toLocaleString("en")}),e.jsx("li",{className:"edit",children:e.jsx(h,{type:"warning",className:"btn-xs",onClick:a=>n(s.id,s.quantity-1),children:e.jsx(L,{className:"fs-6_5  align-middle "})})})]})}),e.jsx("div",{className:"absolute left-0 top-0",children:e.jsxs("button",{type:"button",onClick:()=>y(s.id),className:"-m-2 inline-flex p-2 text-gray-400 hover:text-gray-500",children:[e.jsx("span",{className:"sr-only",children:"حذف"}),e.jsx(S,{"aria-hidden":"true",className:"h-5 w-5"})]})})]})]}),e.jsxs("p",{className:"mt-4 flex space-x-2 text-sm text-gray-700",children:[s.stock?e.jsx(C,{"aria-hidden":"true",className:"h-5 w-5 flex-shrink-0 text-green-500"}):e.jsx(M,{"aria-hidden":"true",className:"h-5 w-5 flex-shrink-0 text-gray-300"}),e.jsx("span",{children:s.stock?"موحود در انبار":"ارسال تا 7 روز"})]})]})]},d))})]}),e.jsxs("section",{"aria-labelledby":"summary-heading",className:"px-4 pb-36 pt-16 sm:px-6 lg:col-start-2 lg:row-start-1 lg:px-0 lg:pb-16",children:[e.jsx("h2",{id:"summary-heading",className:"text-lg font-medium text-gray-900",children:"خلاصه سبد"}),l&&e.jsxs("dl",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("dt",{className:"text-sm text-gray-600",children:"مجموع"}),e.jsx("dd",{className:"text-sm font-medium text-gray-900",children:f.toLocaleString("en")})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:[e.jsx("dt",{className:"flex items-center text-sm text-gray-600",children:e.jsx("span",{children:"تخفیف"})}),e.jsx("dd",{className:"text-sm font-medium text-gray-900",children:c.toLocaleString("en")})]}),e.jsxs("div",{className:"flex items-center justify-between border-t border-gray-200 pt-4",children:[e.jsx("dt",{className:"text-base font-medium text-gray-900",children:"قابل پرداخت"}),e.jsx("dd",{className:"text-base font-medium text-gray-900",children:k((parseInt(b)-c).toLocaleString("en"))})]})]}),e.jsx("div",{className:"mt-6",children:e.jsx(u,{href:route("home.checkout"),className:"block text-center w-full rounded-md border border-transparent bg-red-600 px-4 py-3 text-base font-medium text-white shadow-sm hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 focus:ring-offset-gray-50",children:"رفتن به صفحه صورتحساب"})})]})]})}T.layout=o=>e.jsx(v,{children:o});export{T as default};
