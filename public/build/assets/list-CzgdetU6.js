import{b as o,j as e,L,d as p}from"./index-DDca1aiV.js";import{F as w}from"./front-layout-C0Ygd4uy.js";import{P as D}from"./product-card-ju0Hlcdd.js";import{u as F}from"./react-use-cart.esm-B9s7uaXZ.js";import{s as x}from"./textarea-input-D1X_UlTc.js";import{B as E}from"./breadcrumb-B672qKnU.js";import I from"./list-sidebar-BiLJYVpJ.js";import{u as R,P as W,N as M,A as T}from"./embla-carousel-autoplay.esm-CKD3EjSa.js";import{u as q}from"./embla-carousel-react.esm-BQsc_tkz.js";import{C as z}from"./card-BhTpkvGO.js";import"./hooks-C1aZXtTk.js";import"./index-DDQ21QUK.js";import"./header-single-eSKdbkel.js";import"./createLucideIcon-RXBZCcM_.js";import"./theme-switch-CeGAbILo.js";import"./logo-C8A0auOY.js";import"./search-myPFLCWv.js";import"./x-C5pP27M6.js";import"./button-XQ7iUB_I.js";import"./spinner-D5QHHuo0.js";import"./plus-J8VVJKn2.js";import"./minus-CTVTFXQ9.js";import"./megu-menu-_E1__Ovh.js";import"./chevron-left-DQg-zfff.js";import"./feature-Cn3oYtY8.js";import"./car-DkodfHbk.js";import"./badge-lgw6TIeh.js";import"./star-DrWKssfE.js";import"./MultiRangeSlider--SxZIZPX.js";import"./searchFilter-CKj4n8oj.js";import"./open-closed-YwrQiBCr.js";const A=t=>{const[i,a]=o.useState(0),[n,d]=o.useState(0),l=o.useCallback(c=>{d(c.scrollSnapList().length),a(c.selectedScrollSnap())},[]);return o.useEffect(()=>{t&&(l(t),t.on("select",l),t.on("reInit",l))},[t,l]),{selectedSnap:i,snapCount:n}},G=t=>{const{selectedSnap:i,snapCount:a}=t;return e.jsxs("div",{className:"embla__selected-snap-display",children:[i+1," / ",a]})};function H(t){const{data:{links:i,data:a},brands:n=null,carBrands:d=null,carModels:l=null,categories:c=null,filters:h=null,productCategory:r}=t,{addItem:g}=F(),[j,b]=o.useState(""),[f,u]=q({align:"start",direction:"rtl",loop:!0},[T()]),{prevBtnDisabled:v,nextBtnDisabled:S,onPrevButtonClick:N,onNextButtonClick:C}=R(u),{selectedSnap:y,snapCount:_}=A(u),B=s=>{b(s.target.value),p.get(route(route().current(),r.slug),{column:s.target.value},{replace:!0,preserveState:!0,preserveScroll:!0})},k=s=>{g({id:s.id,sku:s.sku,title:s.title,excerpt:s.excerpt,discount:s.discount,image:s.image,price:s.price}),x("محصول به سبد خرید اضافه شد","success")},P=s=>{p.post(route("user.wishlists.store"),{item:s},{forceFormData:!0,onSuccess:()=>x("محصول به لیست خرید اضافه شد","success")})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{l1:["دسته بندی",""],l2:[r.title,""]}),e.jsx("section",{className:"w-full container justify-center mb-12",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 md:gap-x-2 lg:gap-x-8 xl:gap-x-10",children:[e.jsx(I,{brands:n,carBrands:d,carModels:l,categories:c,filters:h,routeParam:r.slug}),e.jsxs("div",{className:"md:col-span-8 lg:col-span-9 mt-6 md:mt-0",children:[e.jsxs("h2",{className:"font-bold text-2xl pb-6",children:["زیردسته های موجود در : ",r.title]}),r.children&&r.children.length>0&&e.jsxs("section",{className:"bembla relative",children:[e.jsx("div",{className:"bembla__viewport",ref:f,children:e.jsx("div",{className:"bembla__container",children:r.children.map((s,m)=>e.jsx("div",{className:"bembla__slide",children:e.jsxs(z,{children:[e.jsx("figure",{children:s.image!==null?e.jsx("img",{src:route("file.show",{file:s.image,dir:"category/"}),className:"h-22",alt:"slide"}):e.jsx("img",{src:"/thumbnail.webp",className:"h-22",alt:"slide"})}),e.jsxs("div",{className:"card-body text-center p-2",children:[e.jsx(L,{href:route("home.getCategory",s.slug),children:e.jsx("h2",{className:"card-title justify-center text-sm",children:s.title})}),s.description!==null&&e.jsx("p",{children:s.description})]})]})},m))})}),e.jsxs("div",{className:"bembla__controls",children:[e.jsxs("div",{className:"bembla__buttons",children:[e.jsx(W,{onClick:N,disabled:v}),e.jsx(M,{onClick:C,disabled:S})]}),e.jsx(G,{selectedSnap:y,snapCount:_})]})]}),e.jsxs("div",{className:"my-8 text-left",children:[e.jsx("label",{htmlFor:"cars",children:"مرتب سازی"}),e.jsxs("select",{name:"cars",id:"cars",className:"border-[1px] border-gray-300 px-1 mx-2",value:j,onChange:s=>B(s),children:[e.jsx("option",{value:["created_at","desc"],children:"جدیدترین"}),e.jsx("option",{value:["price","asc"],children:"ارزانترین"}),e.jsx("option",{value:["price","desc"],children:"گرانترین"})]})]}),e.jsx("div",{className:"-mx-px grid grid-cols-1 border-l border-gray-200 sm:mx-0  sm:grid-cols-2 lg:grid-cols-4 ",children:a.map((s,m)=>e.jsx(D,{product:s,handleAdd:()=>k(s),handleWish:()=>P(s)},m))}),e.jsx("div",{className:"border-[1px] border-gray-200 mt-8"})]})]})})]})}H.layout=t=>e.jsx(w,{isSingle:!0,children:t});export{H as default};
