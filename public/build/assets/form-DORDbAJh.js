import{u as E,b as m,l as u,j as s,H as O,L as S,d as b}from"./index-DDca1aiV.js";import{A as L}from"./authenticated-layout-BuPpUsr6.js";import{T as A,L as P}from"./textarea-input-D1X_UlTc.js";import{B as j}from"./button-XQ7iUB_I.js";import{C as T}from"./card-BhTpkvGO.js";import{C as p}from"./checkbox-CXquuARA.js";import"./index-DDQ21QUK.js";import"./x-C5pP27M6.js";import"./createLucideIcon-RXBZCcM_.js";import"./user-profile-menu-DgcEU99t.js";import"./car-DkodfHbk.js";import"./theme-switch-CeGAbILo.js";import"./hooks-C1aZXtTk.js";import"./search-myPFLCWv.js";import"./spinner-D5QHHuo0.js";function Q(k){const{props:{errors:d}}=E(),{permissions:h,role:t}=k,[g,l]=m.useState(!1),[x,f]=m.useState(""),[i,c]=m.useState(h),y=(e,r)=>{c(Object.fromEntries(Object.entries(i).map(([a,n])=>[a,n.map(o=>({...o,checked:e===a&&o.name===r?!o.checked:o.checked}))])))},v=e=>{console.log(e),c(Object.fromEntries(Object.entries(i).map(([r,a])=>[r,a.map(n=>({...n,checked:e}))])))},C=(e,r)=>{c(Object.fromEntries(Object.entries(i).map(([a,n])=>[a,n.map(o=>({...o,checked:e===a?r.target.checked:o.checked}))])))},N=e=>{e.preventDefault();const r={name:x,permissions:Object.values(i).flat().filter(a=>a.checked)};if(u.isEmpty(t)===!1){b.put(route("admin.roles.update",t),r,{onStart:()=>l(!0),onFinish:a=>{l(!1)}});return}b.post(route("admin.roles.store"),r,{onStart:()=>l(!0),onFinish:a=>{l(!1)}})};return m.useEffect(()=>{u.isEmpty(t)||(f(t.name),c(Object.fromEntries(Object.entries(h).map(([e,r])=>[e,r.map(a=>({...a,checked:t.permissions.find(n=>n.name===a.name)!==void 0}))]))))},[t]),s.jsxs(L,{title:"ساخت/ویرایش",breadcumbs:[{name:"داشبورد",href:route("admin.dashboard")},{name:"نقش ها",href:route("admin.roles.index")},{name:"ساخت/ویرایش",href:t?route("admin.roles.edit",t):route("admin.roles.create")}],children:[s.jsx(O,{title:"ساخت/ویرایش"}),s.jsx("div",{children:s.jsx(T,{children:s.jsxs("form",{className:"flex flex-col gap-2 justify-between",onSubmit:N,children:[s.jsx(A,{name:"name",value:x,onChange:e=>f(e.target.value),label:"Name",error:d.name}),s.jsx(p,{label:"Check All",onChange:e=>v(e.target.checked)}),s.jsx("div",{className:`flex flex-col border border-rounded border-gray-400 rounded-lg p-2 gap-2 ${d.permissions?"border-red-600":"border-gray-400"}`,children:Object.keys(i).map(e=>s.jsxs("div",{className:"flex flex-col gap-2 rounded border border-gray-400 p-2",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(p,{id:`check-${e}`,onChange:r=>C(e,r)}),s.jsx(P,{label:e})]}),s.jsx("div",{className:`grid grid-cols-1 gap-2 md:grid-cols-4 ${d.permissions?"border-red-600":"border-gray-400 dark:border-gray-700"}`,children:i[e].map(r=>s.jsx("div",{className:"flex items-center space-x-3",children:s.jsx(p,{id:r.label,onChange:()=>y(e,r.name),label:r.label,value:r.checked,name:r.name},r.id)},r.id))})]},e))}),d.permissions&&s.jsx("p",{className:"mb-2 text-sm text-red-600 dark:text-red-500",children:d.permissions}),s.jsx("div",{className:"flex items-center",children:s.jsxs("div",{className:"flex w-full space-x-2 justify-around",children:[s.jsx(j,{processing:g,btnType:"submit",type:"primary",children:"ذخیره"}),s.jsx(S,{href:route("admin.roles.index"),children:s.jsx(j,{type:"secondary",children:"انصراف"})})]})})]})})})]})}export{Q as default};
