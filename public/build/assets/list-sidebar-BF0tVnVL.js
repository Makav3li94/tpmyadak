import{R as v,b as l,j as e,d as C}from"./index-DDca1aiV.js";import te from"./MultiRangeSlider--SxZIZPX.js";import k from"./searchFilter-CKj4n8oj.js";import{Y as K,y as V,o as P,x as se,N as re,B as A,a as z,z as ae,K as G,A as le,T as ne,I as de,C as ce,D as oe,u as L,E as Y,g as ie,i as Q,G as F,F as ue,$ as pe,q as me,w as xe,v as he,V as W}from"./open-closed-YwrQiBCr.js";import{P as T}from"./plus-J8VVJKn2.js";import{M}from"./minus-CTVTFXQ9.js";import"./search-myPFLCWv.js";import"./createLucideIcon-RXBZCcM_.js";var Z;let fe=(Z=v.startTransition)!=null?Z:function(t){t()};var be=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(be||{}),je=(t=>(t[t.ToggleDisclosure=0]="ToggleDisclosure",t[t.CloseDisclosure=1]="CloseDisclosure",t[t.SetButtonId=2]="SetButtonId",t[t.SetPanelId=3]="SetPanelId",t[t.SetButtonElement=4]="SetButtonElement",t[t.SetPanelElement=5]="SetPanelElement",t))(je||{});let ge={0:t=>({...t,disclosureState:L(t.disclosureState,{0:1,1:0})}),1:t=>t.disclosureState===1?t:{...t,disclosureState:1},2(t,s){return t.buttonId===s.buttonId?t:{...t,buttonId:s.buttonId}},3(t,s){return t.panelId===s.panelId?t:{...t,panelId:s.panelId}},4(t,s){return t.buttonElement===s.element?t:{...t,buttonElement:s.element}},5(t,s){return t.panelElement===s.element?t:{...t,panelElement:s.element}}},U=l.createContext(null);U.displayName="DisclosureContext";function X(t){let s=l.useContext(U);if(s===null){let i=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,X),i}return s}let q=l.createContext(null);q.displayName="DisclosureAPIContext";function ee(t){let s=l.useContext(q);if(s===null){let i=new Error(`<${t} /> is missing a parent <Disclosure /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(i,ee),i}return s}let J=l.createContext(null);J.displayName="DisclosurePanelContext";function Ne(){return l.useContext(J)}function Se(t,s){return L(s.type,ge,t,s)}let ye=l.Fragment;function ve(t,s){let{defaultOpen:i=!1,...m}=t,u=l.useRef(null),p=V(s,ne(d=>{u.current=d},t.as===void 0||de(t.as))),h=l.useReducer(Se,{disclosureState:i?0:1,buttonElement:null,panelElement:null,buttonId:null,panelId:null}),[{disclosureState:n,buttonId:c},f]=h,o=P(d=>{f({type:1});let g=ie(u.current);if(!g||!c)return;let x=d?Q(d)?d:"current"in d&&Q(d.current)?d.current:g.getElementById(c):g.getElementById(c);x?.focus()}),S=l.useMemo(()=>({close:o}),[o]),b=z({open:n===0,close:o}),j={ref:p},y=G();return v.createElement(U.Provider,{value:h},v.createElement(q.Provider,{value:S},v.createElement(ce,{value:o},v.createElement(oe,{value:L(n,{0:A.Open,1:A.Closed})},y({ourProps:j,theirProps:m,slot:b,defaultTag:ye,name:"Disclosure"})))))}let we="button";function Ee(t,s){let i=l.useId(),{id:m=`headlessui-disclosure-button-${i}`,disabled:u=!1,autoFocus:p=!1,...h}=t,[n,c]=X("Disclosure.Button"),f=Ne(),o=f===null?!1:f===n.panelId,S=l.useRef(null),b=V(S,s,P(r=>{if(!o)return c({type:4,element:r})}));l.useEffect(()=>{if(!o)return c({type:2,buttonId:m}),()=>{c({type:2,buttonId:null})}},[m,c,o]);let j=P(r=>{var N;if(o){if(n.disclosureState===1)return;switch(r.key){case F.Space:case F.Enter:r.preventDefault(),r.stopPropagation(),c({type:0}),(N=n.buttonElement)==null||N.focus();break}}else switch(r.key){case F.Space:case F.Enter:r.preventDefault(),r.stopPropagation(),c({type:0});break}}),y=P(r=>{switch(r.key){case F.Space:r.preventDefault();break}}),d=P(r=>{var N;ue(r.currentTarget)||u||(o?(c({type:0}),(N=n.buttonElement)==null||N.focus()):c({type:0}))}),{isFocusVisible:g,focusProps:x}=pe({autoFocus:p}),{isHovered:D,hoverProps:O}=me({isDisabled:u}),{pressed:w,pressProps:R}=xe({disabled:u}),H=z({open:n.disclosureState===0,hover:D,active:w,disabled:u,focus:g,autofocus:p}),_=he(t,n.buttonElement),a=o?W({ref:b,type:_,disabled:u||void 0,autoFocus:p,onKeyDown:j,onClick:d},x,O,R):W({ref:b,id:m,type:_,"aria-expanded":n.disclosureState===0,"aria-controls":n.panelElement?n.panelId:void 0,disabled:u||void 0,autoFocus:p,onKeyDown:j,onKeyUp:y,onClick:d},x,O,R);return G()({ourProps:a,theirProps:h,slot:H,defaultTag:we,name:"Disclosure.Button"})}let Ie="div",Pe=Y.RenderStrategy|Y.Static;function De(t,s){let i=l.useId(),{id:m=`headlessui-disclosure-panel-${i}`,transition:u=!1,...p}=t,[h,n]=X("Disclosure.Panel"),{close:c}=ee("Disclosure.Panel"),[f,o]=l.useState(null),S=V(s,P(D=>{fe(()=>n({type:5,element:D}))}),o);l.useEffect(()=>(n({type:3,panelId:m}),()=>{n({type:3,panelId:null})}),[m,n]);let b=se(),[j,y]=re(u,f,b!==null?(b&A.Open)===A.Open:h.disclosureState===0),d=z({open:h.disclosureState===0,close:c}),g={ref:S,id:m,...ae(y)},x=G();return v.createElement(le,null,v.createElement(J.Provider,{value:h.panelId},x({ourProps:g,theirProps:p,slot:d,defaultTag:Ie,features:Pe,visible:j,name:"Disclosure.Panel"})))}let $e=K(ve),E=K(Ee),I=K(De),B=Object.assign($e,{Button:E,Panel:I});function _e({brands:t=null,carBrands:s=null,carModels:i=null,categories:m=null,filters:u=null,routeParam:p=null,children:h}){const[n,c]=l.useState(!1),[f,o]=l.useState(!1),[S,b]=l.useState(0),[j,y]=l.useState(99e6),[d,g]=l.useState({brands:[],carBrands:[],carModels:[],categories:[]}),[x,D]=l.useState({}),O=(a,r)=>{b(a),y(r),C.get(route(route().current(),p),{priceMin:a,priceMax:r,staticFilters:d,dynamicFilters:x},{replace:!0,preserveState:!0,preserveScroll:!0})},w=(a,r)=>{g(N=>{const $={...N,[a]:r};return C.get(route(route().current(),p),{priceMin:S,priceMax:j,staticFilters:$,dynamicFilters:x},{replace:!0,preserveState:!0,preserveScroll:!0}),$})},R=(a,r)=>{D(N=>{const $={...N,[a]:r};return C.get(route(route().current(),p),{priceMin:S,priceMax:j,staticFilters:d,dynamicFilters:$},{replace:!0,preserveState:!0,preserveScroll:!0}),$})},H=()=>{c(!n),C.get(route(route().current(),p),{in_stock:!n},{replace:!0,preserveState:!0,preserveScroll:!0})},_=()=>{o(!f),C.get(route(route().current(),p),{has_promotion:!f},{replace:!0,preserveState:!0,preserveScroll:!0})};return e.jsx("div",{className:"md:col-span-4 lg:col-span-3 lg:px-0  px-3",children:e.jsxs("div",{className:"drawer lg:drawer-open flex w-full",children:[e.jsx("input",{id:"my-drawer-3",type:"checkbox",className:"drawer-toggle"}),e.jsx("div",{className:"drawer-content flex flex-col items-center justify-center",children:e.jsx("label",{htmlFor:"my-drawer-3",className:"btn btn-xs btn-error text-base-100 drawer-button lg:hidden fixed right-0 top-3/8 z-1",children:"فیلترها"})}),e.jsxs("div",{className:"drawer-side h-full w-full",children:[e.jsx("label",{htmlFor:"my-drawer-3","aria-label":"close sidebar",className:"drawer-overlay"}),e.jsxs("div",{className:"border-[1px] border-gray-300 border-t-[#d8330a] rounded-md overflow-hidden",children:[e.jsx("div",{className:"bg-[#d8330a] text-base-100 py-3 px-7 font-semibold",children:"فیلترها"}),e.jsxs("ul",{className:"bg-base-100 py-4",children:[e.jsx("li",{children:e.jsx("fieldset",{className:"fieldset bg-base-100 border-base-300 rounded-box w-full lg:w-64 border p-4 mb-5",children:e.jsxs("label",{className:"label flex justify-between items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"toggle",checked:n,onChange:()=>H()}),e.jsx("div",{children:"فقط موجود ها"})]})})}),e.jsx("li",{children:e.jsx("fieldset",{className:"fieldset bg-base-100 border-base-300 rounded-box w-full lg:w-64 border p-4 mb-5",children:e.jsxs("label",{className:"label flex justify-between items-center",children:[e.jsx("input",{type:"checkbox",defaultChecked:!0,className:"toggle",checked:f,onChange:()=>_()}),e.jsx("div",{children:"تخفیف دار ها"})]})})}),e.jsx("li",{children:e.jsxs("fieldset",{className:"fieldset bg-base-100 border-base-300 rounded-box w-full lg:w-64 border p-4 mb-5",children:[e.jsx("div",{className:"",children:"محدوده قیمت"}),e.jsx(te,{min:0,max:99e6,onChange:({min:a,max:r})=>O(a,r)})]})}),t&&e.jsx("li",{className:"border-b border-gray-300 mb-2 pb-2",children:e.jsxs(B,{as:"div",className:"px-4",defaultOpen:!0,children:[e.jsx("dt",{children:e.jsxs(E,{className:"group flex w-full items-start justify-between text-left ",children:[e.jsx("span",{className:" text-sm font-medium ",children:"         برند ها"}),e.jsxs("span",{className:"ml-6 flex h-7 items-center",children:[e.jsx(T,{"aria-hidden":"true",className:"h-4 w-4 group-data-[open]:hidden"}),e.jsx(M,{"aria-hidden":"true",className:"h-4 w-4 [.group:not([data-open])_&]:hidden"})]})]})}),e.jsx(I,{as:"dd",className:"mt-4 p-0",children:e.jsx(k,{groupName:"brands",data:t,selected:d.brands,setSelected:a=>w("brands",a)})})]})},1),s&&e.jsx("li",{className:"border-b border-gray-300 mb-2 pb-2",children:e.jsxs(B,{as:"div",className:"px-4",defaultOpen:!0,children:[e.jsx("dt",{children:e.jsxs(E,{className:"group flex w-full items-start justify-between text-left ",children:[e.jsx("span",{className:" text-sm font-medium ",children:" برند خودرو"}),e.jsxs("span",{className:"ml-6 flex h-7 items-center",children:[e.jsx(T,{"aria-hidden":"true",className:"h-4 w-4 group-data-[open]:hidden"}),e.jsx(M,{"aria-hidden":"true",className:"h-4 w-4 [.group:not([data-open])_&]:hidden"})]})]})}),e.jsx(I,{as:"dd",className:"mt-4 p-0",children:e.jsx(k,{groupName:"carBrands",data:s,selected:d.carBrands,setSelected:a=>w("carBrands",a)})})]})},2),i&&e.jsx("li",{className:"border-b border-gray-300 mb-2 pb-2",children:e.jsxs(B,{as:"div",className:"px-4",defaultOpen:!0,children:[e.jsx("dt",{children:e.jsxs(E,{className:"group flex w-full items-start justify-between text-left ",children:[e.jsx("span",{className:" text-sm font-medium ",children:" نوع خودرو"}),e.jsxs("span",{className:"ml-6 flex h-7 items-center",children:[e.jsx(T,{"aria-hidden":"true",className:"h-4 w-4 group-data-[open]:hidden"}),e.jsx(M,{"aria-hidden":"true",className:"h-4 w-4 [.group:not([data-open])_&]:hidden"})]})]})}),e.jsx(I,{as:"dd",className:"mt-4 p-0",children:e.jsx(k,{groupName:"carModels",data:i,selected:d.carModels,setSelected:a=>w("carModels",a)})})]})},3),m&&e.jsx("li",{className:"border-b border-gray-300 mb-2 pb-2",children:e.jsxs(B,{as:"div",className:"px-4",defaultOpen:!0,children:[e.jsx("dt",{children:e.jsxs(E,{className:"group flex w-full items-start justify-between text-left ",children:[e.jsx("span",{className:" text-sm font-medium ",children:" دسته بندی"}),e.jsxs("span",{className:"ml-6 flex h-7 items-center",children:[e.jsx(T,{"aria-hidden":"true",className:"h-4 w-4 group-data-[open]:hidden"}),e.jsx(M,{"aria-hidden":"true",className:"h-4 w-4 [.group:not([data-open])_&]:hidden"})]})]})}),e.jsx(I,{as:"dd",className:"mt-4 p-0",children:e.jsx(k,{groupName:"categories",data:m,selected:d.categories,setSelected:a=>w("categories",a)})})]})},4),u&&u.map(a=>e.jsx("li",{children:e.jsxs(B,{as:"div",className:"px-4",defaultOpen:!0,children:[e.jsx("dt",{children:e.jsxs(E,{className:"group flex w-full items-start justify-between text-left ",children:[e.jsx("span",{className:" text-sm font-medium ",children:a.title}),e.jsxs("span",{className:"ml-6 flex h-7 items-center",children:[e.jsx(T,{"aria-hidden":"true",className:"h-4 w-4 group-data-[open]:hidden"}),e.jsx(M,{"aria-hidden":"true",className:"h-4 w-4 [.group:not([data-open])_&]:hidden"})]})]})}),e.jsx(I,{as:"dd",className:"mt-4 p-0",children:e.jsx(k,{groupName:a.title,data:a.values.map(r=>({label:r,value:r})),selected:x[a.id]||[],setSelected:r=>R(a.id,r)})})]})},a.id)),h]})]})]})]})})}export{_e as default};
